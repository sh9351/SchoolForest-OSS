<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
        crossorigin="anonymous"></script>
    <script src="/global.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/ScrollTrigger.min.js"></script> -->
    <title>법정대리인 개인정보 제공 본인인증 | 학교숲</title>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');

        * {
            font-family: Pretendard;
            scroll-behavior: smooth;
            overflow-x: hidden;
        }

        html::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>

<body>
    <main>
        <div class="container">
            <div class="container">
                <header
                    class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
                    <a href="/" class="d-flex align-items-center col-md-3 mb-2 mb-md-0 text-dark text-decoration-none">
                        <img src="/logo.png" width="40" height="40">
                        <h2 class="ms-3 schoolname"></h2>
                        <h2 class="text-black-50">|학교숲</h2>
                    </a>
                    <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
                        <li><a href="#" class="nav-link px-2 link-dark">시간표</a></li>
                        <li><a href="#" class="nav-link px-2 link-dark">커뮤니티</a></li>
                    </ul>
                    <div class="col-md-3 text-end">
                        <button type="button" class="btn btn-outline-primary me-2">로그인</button>
                        <button type="button" class="btn btn-primary">회원가입</button>
                    </div>
                </header>
            </div>
            <div class="step1">
                <h1>법정대리인 개인정보 제공 본인인증</h1>
                <h3>마지막 단계에요! 학교숲에서는 사용자들의 개인정보를 안전하게 보호하기 위해 개인정보를 수집할 때 법정대리인의 동의를 받고 있어요. 법정대리인의 확인을 위해 간단한 본인인증이
                    필요해요.
                </h3>
                <div class="row mb-2">
                    <div class="col">
                        <h3>법정대리인 성명</h3>
                        <input type="text" class="form-control parentName" placeholder="김민호">
                    </div>
                    <div class="col">
                        <h3>법정대리인 휴대전화번호</h3>
                        <input type="number" class="form-control parentPhone" placeholder="01012345678">
                    </div>
                </div>
                <div class="row mb-2">
                    <h3>법정대리인 주민등록번호</h3>
                    <div class="col">
                        <input type="number" class="form-control parentSSN1" placeholder="801120">
                    </div>
                    <div class="col">
                        <input type="number" class="form-control parentSSN2" placeholder="1068236">
                    </div>
                </div>
                <h5 class="text-black-50">걱정 마세요! 개인정보는 교육청/카카오를 통해 안전하게 처리돼요.<br>
                    아래 버튼을 클릭하면 본인은 <span class="studentName"></span>의 친권자, 미성년후견인, 혹은 성년후견인 등 <strong>법적으로 인정받는
                        법정대리인인 것을 확인하는 것이며<br><span class="studentName"></span>의 개인정보를 학교숲에 제공하는 것에 동의하는 것입니다.</strong>
                </h5>
                <button type="submit" class="btn btn-primary parentVerifyStep1">동의하기</button>
                <h3 class="mt-3">자주 묻는 질문</h3>
                <div class="accordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                data-bs-target="#question1">
                                왜 법정대리인의 개인정보 제공 본인인증이 필요한가요?
                            </button>
                        </h2>
                        <div id="question1" class="accordion-collapse collapse show">
                            <div class="accordion-body">
                                학교숲은 누구나 자유롭고 재미있게 사용할 수 있도록 만들어진 모두를 위한 웹사이트에요. 하지만 이러한 웹사이트에 가입하기 위해서는 가입자의 민감한 개인정보를
                                필수적으로 수집해야 해요. 만14세 미만의 개인정보를 유출되지 않도록 관리하고 합법적으로 수집하기 위해 학교숲에 가입하기 위해서는 법정대리인의 개인정보 제공
                                본인인증이 필요해요. 걱정 마세요, 언제든지 다시 학교숲으로 돌아와 인증을 완료할 수 있어요.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#question2">
                                학교숲은 가입자의 어떠한 정보를 수집하나요?
                            </button>
                        </h2>
                        <div id="question2" class="accordion-collapse collapse">
                            <div class="accordion-body">
                                학교숲은 가입자의 이름, 생년월일, 학교, 학년, 반, 및 번호를 수집해요. 모든 정보는 가입자가 입력하고 교육부가 검증해요.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#question3">
                                학교숲은 믿을 수 있는 서비스인가요?
                            </button>
                        </h2>
                        <div id="question3" class="accordion-collapse collapse">
                            <div class="accordion-body">학교숲은 가입자의 모든 개인정보를 적절한 동의 없이 제3자에게 제공하지 않아요. 만약 개인정보 혹은 보안과
                                관련된 질문이 있으시다면, <a href="" class="text-decoration-none">여기</a>로 문의
                                주세요!
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#question4">
                                왜 인증 요청 기관이 국민신문고로 표시되나요?
                            </button>
                        </h2>
                        <div id="question4" class="accordion-collapse collapse">
                            <div class="accordion-body">
                                학교숲은 교육부와 연동하여 정보를 제공받음과 동시에, 교육부가 제공하는 인증 수단을 활용해요. 교육부와 국민신문고의 협약으로, 교육부에서 행하는 모든 인증
                                요청의
                                기관이 국민신문고로 표시돼요. 학교숲도 이 때문에 요청 기관이 국민신문고로 표시돼요. 학교숲은 법정대리인의 국민신문고 계정에 절대 접근할 수도 없어요.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#question5">
                                법정대리인의 정보는 어떠한 용도로 사용되나요?
                            </button>
                        </h2>
                        <div id="question5" class="accordion-collapse collapse">
                            <div class="accordion-body">
                                학교숲은 인증을 완료한 법정대리인 정보를 사용자 정보와 함께 저장해요. 이는 추후에 법정대리인이 개인정보 제공을 동의했다는 사실을 명명백백히 밝히기
                                위함이에요.
                                또한, 학교숲 계정에 문제가 생긴 경우 등에도 학교숲은 법정대리인에게 연락할 수 있어요. 법정대리인의 정보 또한 마찬가지로 적절한 동의 없이 제3자에게 일절
                                제공되지 않아요.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="step2 d-none">
                <h3><span class="studentName"></span>님의 법정대리인 <span class="parentName"></span>님에게 인증 요청을 전송했어요!<br>카카오톡
                    지갑을 통한 간단한 인증 후에 <span class="studentName"></span>님은 학교숲의 모든 기능을 자유롭게 이용하실 수 있어요.</h3>
                <button type="submit" class="btn btn-primary parentVerifyStep2">인증하기</button>
            </div>
            <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
                <div class="col-md-4 d-flex align-items-center">
                    <img src="/logo.png" width="50" height="50" class="me-2">
                    <span>&copy; 2022 <a href="https://sh9351.github.io" class="text-decoration-noner">임세훈</a>이 ❤️을 담아
                        제작했어요</span>
                </div>
                <a href="https://getbootstrap.kr">Bootstrap으로 만들었어요</a>
            </footer>
        </div>
    </main>
    <script type="module">
        import { analyze, validate } from 'https://cdn.skypack.dev/@ko_kr/id'
        window.addEventListener('user', () => {
            document.querySelectorAll('.studentName').forEach(i => i.innerHTML = user.name)
        })
        const name = document.querySelector('.parentName')
        const phone = document.querySelector('.parentPhone')
        const ssn1 = document.querySelector('.parentSSN1')
        const ssn2 = document.querySelector('.parentSSN2')
        document.querySelector('.parentVerifyStep1').addEventListener('click', e => {
            e.preventDefault()
            if (!(name.value && phone.value && ssn1.value && ssn2.value)) {
                alert('법정대리인 성명, 휴대전화번호, 및 주민등록번호를 확인해 주세요.')
                return
            }
            if (!name.value.match(/^[ㄱ-ㅎ|가-힣]+$/)) {
                alert('법정대리인 성명은 한글만 포함할 수 있어요.')
                return
            }
            const ssn = analyze(ssn1.value + ssn2.value)
            if (!ssn.valid) {
                alert('법정대리인의 주민등록번호가 유효하지 않아요.')
                return
            }
            if (ssn.age < 19) {
                alert('법정대리인의 나이는 만 19세 이상이여야 해요.')
                return
            }

            document.querySelectorAll('.studentName').forEach(i => i.innerHTML = user.name)
            document.querySelectorAll('.parentName').forEach(i => i.innerHTML = name.value)
            api('/api/verify', {
                name: name.value,
                phone: phone.value,
                ssn1: ssn1.value,
                ssn2: ssn2.value
            }).then(data => {
                console.log(data)
                document.querySelector('.parentVerifyStep2').addEventListener('click', () => api('/api/verify/result', data).then(data => {
                    document.querySelector('.step1').classList.add('d-none')
                    document.querySelector('.step2').classList.remove('d-none')
                    console.log(data)
                }))
            })
        })
    </script>
</body>

</html>